<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Procedimentos</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <style>
      .table {
        margin-top: 20px;
      }
      .form-inline input {
        width: 300px;
      }
      .container {
        margin-top: 50px;
      }
      .btn-novo {
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="d-flex justify-content-between align-items-center">
        <h2 class="text-center">Lista de Procedimentos</h2>
        <a
          href="{{ url_for('adicionar_procedimento') }}"
          class="btn btn-success btn-novo"
          >+ Novo Procedimento</a
        >
      </div>
      <form
        class="form-inline mb-3"
        method="GET"
        action="{{ url_for('listar_procedimentos') }}"
      >
        <input
          type="text"
          name="query"
          class="form-control mr-2"
          placeholder="Pesquisar procedimento"
          value="{{ query }}"
        />
        <button type="submit" class="btn btn-primary">Pesquisar</button>
      </form>
      <table class="table table-striped table-hover">
        <thead class="thead-dark">
          <tr>
            <th>Nome</th>
            <th>Descrição</th>
            <th>Preço</th>
            <th class="text-center">Ações</th>
          </tr>
        </thead>
        <tbody>
          {% if procedimentos %} {% for procedimento in procedimentos %}
          <tr>
            <td>{{ procedimento.nome }}</td>
            <td>{{ procedimento.descricao or 'N/A' }}</td>
            <td>R$ {{ procedimento.preco }}</td>
            <td class="text-center">
              <a
                href="{{ url_for('editar_procedimento', id=procedimento.id) }}"
                class="btn btn-warning btn-sm"
              >
                Editar
              </a>
              <form
                action="{{ url_for('excluir_procedimento', id=procedimento.id) }}"
                method="POST"
                style="display: inline-block"
              >
                <button
                  type="submit"
                  class="btn btn-danger btn-sm"
                  onclick="return confirm('Tem certeza que deseja excluir?')"
                >
                  Excluir
                </button>
              </form>
            </td>
          </tr>
          {% endfor %} {% else %}
          <tr>
            <td colspan="4" class="text-center">
              Nenhum procedimento encontrado.
            </td>
          </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </body>
</html>
