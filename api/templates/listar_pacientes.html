<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pacientes</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <style>
      .table {
        margin-top: 20px;
      }
      .form-inline input {
        width: 300px;
      }
      .container {
        margin-top: 50px;
      }
      .btn-novo {
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="d-flex justify-content-between align-items-center">
        <h2 class="text-center">Lista de Pacientes</h2>
        <a
          href="{{ url_for('cadastrar_paciente') }}"
          class="btn btn-success btn-novo"
          >+ Novo Paciente</a
        >
      </div>
      <form
        class="form-inline mb-3"
        method="GET"
        action="{{ url_for('listar_pacientes') }}"
      >
        <input
          type="text"
          name="query"
          class="form-control mr-2"
          placeholder="Pesquisar paciente"
          value="{{ query }}"
        />
        <button type="submit" class="btn btn-primary">Pesquisar</button>
      </form>
      <table class="table table-striped table-hover">
        <thead class="thead-dark">
          <tr>
            <th>Nome</th>
            <th>Email</th>
            <th>Celular</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          {% if pacientes %} {% for paciente in pacientes %}
          <tr>
            <td>{{ paciente.nome }}</td>
            <td>{{ paciente.email or 'N/A' }}</td>
            <td>{{ paciente.celular or 'N/A' }}</td>
            <td>
              <a
                href="{{ url_for('editar_paciente', id=paciente.id) }}"
                class="btn btn-warning btn-sm"
              >
                Editar
              </a>
              <form
                action="{{ url_for('excluir_paciente', id=paciente.id) }}"
                method="POST"
                style="display: inline-block"
                onsubmit="return confirm('Tem certeza que deseja excluir este paciente?');"
              >
                <button type="submit" class="btn btn-danger btn-sm">
                  Excluir
                </button>
              </form>
            </td>
          </tr>
          {% endfor %} {% else %}
          <tr>
            <td colspan="4" class="text-center">Nenhum paciente encontrado.</td>
          </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </body>
</html>
